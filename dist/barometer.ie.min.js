/*! barometer v1.4.0 */
!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";var a=window.barometer=e.exports={},r=n(2),o=n(6),i=n(8);n(7),n(3),n(9),n(10),a.url=null,a.offset=i.offset,a.gauge=r.gauge,a.count=r.count,a.onPageChanged=o.onPageChanged,a.oncePageLoaded=o.oncePageLoaded},function(e,t,n){"use strict";var a=e.exports={},r=n(3),o=n(1);a.url="XXXXX",a.e=function(){a.buffer={gauges:{},counters:{}},a.bufferSize=0},a.e(),a.count=function(e){a.buffer.counters[e]=a.buffer.counters[e]||0,a.buffer.counters[e]++,a.t(),a.bufferSize++,window.barometer.debug&&console.log("count",e)},a.gauge=function(e,t){a.buffer.gauges[e]=a.buffer.gauges[e]||[],a.buffer.gauges[e].push(t),a.t(),a.bufferSize++,window.barometer.debug&&console.log("gauge",e,t)};var i=null;a.t=function(){i&&a.bufferSize<100&&clearTimeout(i),i=setTimeout(a.n,5e3)},a.n=function(e){if(0!==a.bufferSize&&o.url){i&&(clearTimeout(i),i=null);var t=a.buffer;a.e();var n=o.url;if(navigator.sendBeacon)navigator.sendBeacon(n,JSON.stringify(t));else{var u=new r.a;u.open("POST",n,!0),u.timeout=4e3,u.setRequestHeader("Content-Type","application/json"),u.send(JSON.stringify(t))}}}},function(e,t,n){"use strict";var a=e.exports={},r=n(4),o=n(2),i=n(5);a.a=window.XMLHttpRequest;var u=["unsent","opened","headers_received","loading","done"];a.r=function(e){return"xhr."+e},a.o=function(e,t){var n={};for(var a in e)"_"!==a[0]&&0!==e[a]&&(n[a]=e[a]-t);return n},a.i=function(e){var t,n,r=i(e.url),u=a.o(e.readyStateTimes,e.offset);for(var s in u)t="timing."+e.type+"."+r+"."+s,n=a.r(t),o.gauge(n,u[s]);t="responses."+e.type+"."+r+"."+e.request.status,n=a.r(t),o.count(n),t="size."+e.type+"."+r+"."+e.request.status,n=a.r(t),o.gauge(n,(e.request.responseText||"").length)},window.XMLHttpRequest=function(){var e,t,n,o=new a.a,i={},s=o.open;return r(o,"readystatechange",function(){i[u[o.readyState]]=new Date}),r(o,"loadend",function(r){setTimeout(function(){return i.processed=new Date,a.i({type:t.toLowerCase(),url:n,readyStateTimes:i,offset:e,request:o})},0)}),o.open=function(a,r){return e=new Date,t=a,n=r,s.apply(o,arguments)},o}},function(e,t){"use strict";e.exports=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}},function(e,t){"use strict";e.exports=function(e,t){var n=(e||"").split("?")[0];return n=n.replace(/^https?:\/\//i,""),"/"===n[0]?n=(window.location.host||"").replace(/[^a-z0-9-\/]/gi,"_")+"."+n.slice(1).replace(/[^a-z0-9-\/]/gi,"_"):(n=n.split("/"),n=n.shift().replace(/[^a-z0-9-\/]/gi,"_")+"."+n.join("/").replace(/[^a-z0-9-\/]/gi,"_")),(t||"").match(/\?/)&&(n+=t.split("?")[0].slice(1).replace(/[^a-z0-9-]/gi,"_")),n}},function(e,t,n){"use strict";var a,r,o,i=e.exports={},u=n(4),s=n(7),c=n(2),f=n(1),g=0,l=[];i.u=function(){c.gauge(r,new Date-a)},i.s=function(){var e=new Date;f.pageStartedAt=e,c.count(s.r("visits")),a&&i.u(),g++;var t=g,n=0,u=[9,9,9,9,9],d=!1,p=25,w=s.r("dynamic"),v=function(){clearTimeout(h),o=!0,a=new Date,r=s.r("engagement");var t=125;c.gauge(w,new Date-e-t);for(var n=0;n<l.length;n++)l[n]()},h=setTimeout(function(){if(d=!0,1===g)for(var e=0;e<l.length;e++)l[e]()},6e3),m=function(){var e=new Date;setTimeout(function(){var a=new Date,r=a-e-p;if(r>n&&(n=r),!d){if(t!==g)return v();u.shift(),u.push(r);for(var o=0,i=0;i<5;i++)o+=u[i];return o<5&&n>25?v():void setTimeout(m,p)}},p)};m()},i.s(),window.history?(u(window,"popstate",i.s),function(e){if(e){var t=e.pushState;e.pushState=function(){return i.s(),t.apply(e,arguments)}}}(window.history)):u(window,"hashchange",i.s),i.onPageChanged=function(e){l.push(e)},i.oncePageLoaded=function(e){if(o)return e();var t=!1;i.onPageChanged(function(){t||(t=!0,e())})}},function(e,t,n){"use strict";var a=e.exports={},r=n(4),o=n(1),i=n(2),u=n(5);a.o=function(e){var t={},n=e.navigationStart;e.toJSON&&(e=e.toJSON());for(var a in e)"navigationStart"!==a&&0!==e[a]&&(t[a]=e[a]-n);return 0!==e.navigationStart&&(t.timeToFirstScript=o.pageStartedAt-e.navigationStart),t},a.r=function(e){var t=u(window.location.href,window.location.hash);return"pageload."+t+"."+e.replace(/[^a-z0-9-]/gi,"_")},a.f=function(){var e,t=window.performance.timing||{},n=a.o(t);for(var r in n)e=a.r(r),i.gauge(e,n[r]);var o=(window.performance.navigation||{}).redirectCount||0;e=a.r("redirects"),i.gauge(e,o)},"object"==typeof window.performance&&("complete"===document.readyState?a.f():r(window,"load",a.f))},function(e,t,n){"use strict";var a=e.exports={},r=n(1),o=n(5),i=n(2);a.offset=function(e){var t=new Date-r.pageStartedAt,n=o(window.location.href,window.location.hash),a="pageload."+n+"."+e.replace(/[^a-z0-9-]/gi,"_");i.gauge(a,t)}},function(e,t,n){"use strict";var a=e.exports={},r=n(6),o=n(2),i=0;a.handleResource=function(e){var t=a.findRule(e);t&&a.track(e,t)},a.findRule=function(e){var t=window.barometer.resources;if(t){for(var n=e.name.replace(/https?:\/\//i,"").split("/"),a=n.shift(),r=n.join("/"),o=0;o<t.length;o++){var i=t[o];if((!i.domain||a.match(i.domain))&&(!i.path||r.match(i.path)))return i}return null}},a.track=function(e,t){var n=e.name.replace(/https?:\/\//i,"").split("/"),a="resources.";a+=n.shift().replace(/[^a-z0-9_]/gi,"_"),a+=".",a+=(t.rename||n.join("/")).split("?")[0].replace(/[^a-z0-9_]/gi,"_");for(var r in t.metrics){r=t.metrics[r];var i=e[r];0!==i&&o.gauge(a+"."+r,i)}},a.initialise=function(){window.performance&&window.performance.getEntries&&r.onPageChanged(function(){var e=window.performance.getEntries();if(e&&e.length)for(;i<e.length;i++)a.handleResource(e[i])})},a.initialise()},function(e,t,n){"use strict";var a=e.exports={},r=n(6),o=n(3),i=n(4),u=n(2);a.g=function(e){e||(e=86400);var t=(new Date).getTime(),n=t+1e3*e;console.log("TIME",(new Date).toUTCString(),e),console.log("SETTING COOKIE","barometer-bandwidth-run-at="+t+"; expires="+new Date(n).toUTCString()),document.cookie="barometer-bandwidth-run-at="+t+"; expires="+new Date(n).toUTCString()},a.l=function(){return document.cookie&&document.cookie.match(/barometer\-bandwidth\-run\-at/)},a.d=function(e){var t=0;for(var n in e)t+=e[n];u.gauge("bandwidth",t/e.length)},a.f=function(e){var t=e.url||"https://s3-eu-west-1.amazonaws.com/hx-barometer/test",n=e.size||1024e4,r=1e3*(e.length||5),u=new o.a;window.barometer.w=u;var s,c,f=[];i(u,"progress",function(e){var t=new Date;if(s&&c){var a=(e.loaded-s)/e.total,r=n*a;f.push(8e3*r/(t-c))}s=e.loaded,c=t}),i(u,"loadend",function(e){a.d(f)}),u.timeout=r,u.open("GET",t,!0),u.send()},a.v=!1,a.h=function(){var e=window.barometer.bandwidth;if(e&&!a.v&&!a.l()&&window.ProgressEvent){a.v=!0;var t=e.every||86400;a.g(t);var n=e.defer;n||0===n||(n=5),setTimeout(function(){a.f(e)},1e3*n)}},r.oncePageLoaded(a.h)}]);